<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "6e562d7e5a77c8982da4aa8f762ad1d8",
  "translation_date": "2025-07-14T02:48:53+00:00",
  "source_file": "05-AdvancedTopics/mcp-security-entra/README.md",
  "language_code": "ar"
}
-->
# ุชุฃููู ุณูุฑ ุนูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู: ูุตุงุฏูุฉ Entra ID ูุฎูุงุฏู ุจุฑูุชูููู ุณูุงู ุงููููุฐุฌ

## ุงูููุฏูุฉ  
ุชุฃููู ุฎุงุฏู Model Context Protocol (MCP) ุงูุฎุงุต ุจู ูุง ููู ุฃูููุฉ ุนู ุฅุบูุงู ุจุงุจ ููุฒูู ุงูุฃูุงูู. ุชุฑู ุฎุงุฏู MCP ููุชูุญูุง ูุนุฑุถ ุฃุฏูุงุชู ูุจูุงูุงุชู ูููุตูู ุบูุฑ ุงููุตุฑุญ ุจูุ ููุง ูุฏ ูุคุฏู ุฅูู ุงุฎุชุฑุงูุงุช ุฃูููุฉ. ุชููุฑ Microsoft Entra ID ุญูุงู ูููุงู ูุฅุฏุงุฑุฉ ุงููููุฉ ูุงููุตูู ูุงุฆููุง ุนูู ุงูุณุญุงุจุฉุ ููุง ูุณุงุนุฏ ุนูู ุถูุงู ุฃู ุงููุณุชุฎุฏููู ูุงูุชุทุจููุงุช ุงููุตุฑุญ ููู ููุท ูููููู ุงูุชูุงุนู ูุน ุฎุงุฏู MCP ุงูุฎุงุต ุจู. ูู ูุฐุง ุงููุณูุ ุณุชุชุนูู ููููุฉ ุญูุงูุฉ ุณูุฑ ุนูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงูุฎุงุต ุจู ุจุงุณุชุฎุฏุงู ูุตุงุฏูุฉ Entra ID.

## ุฃูุฏุงู ุงูุชุนูู  
ุจููุงูุฉ ูุฐุง ุงููุณูุ ุณุชููู ูุงุฏุฑูุง ุนูู:

- ููู ุฃูููุฉ ุชุฃููู ุฎูุงุฏู MCP.  
- ุดุฑุญ ุฃุณุงุณูุงุช Microsoft Entra ID ููุตุงุฏูุฉ OAuth 2.0.  
- ุงูุชูููุฒ ุจูู ุงูุนููุงุก ุงูุนุงููู ูุงูุณุฑูููู.  
- ุชูููุฐ ูุตุงุฏูุฉ Entra ID ูู ุณููุงุฑูููุงุช ุฎุงุฏู MCP ุงููุญููุฉ (ุงูุนููู ุงูุนุงู) ูุงูุจุนูุฏุฉ (ุงูุนููู ุงูุณุฑู).  
- ุชุทุจูู ุฃูุถู ููุงุฑุณุงุช ุงูุฃูุงู ุนูุฏ ุชุทููุฑ ุณูุฑ ุนูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู.

## ุงูุฃูุงู ูMCP  

ุชูุงููุง ููุง ูุง ุชุชุฑู ุจุงุจ ููุฒูู ุงูุฃูุงูู ููุชูุญูุงุ ูุง ูุฌุจ ุฃู ุชุชุฑู ุฎุงุฏู MCP ุงูุฎุงุต ุจู ูุชุงุญูุง ูุฃู ุดุฎุต. ุชุฃููู ุณูุฑ ุนูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุถุฑูุฑู ูุจูุงุก ุชุทุจููุงุช ูููุฉ ูููุซููุฉ ูุขููุฉ. ุณููุฏู ูู ูุฐุง ุงููุตู ููููุฉ ุงุณุชุฎุฏุงู Microsoft Entra ID ูุชุฃููู ุฎูุงุฏู MCP ุงูุฎุงุตุฉ ุจูุ ููุง ูุถูู ุฃู ุงููุณุชุฎุฏููู ูุงูุชุทุจููุงุช ุงููุตุฑุญ ููู ููุท ูููููู ุงูุชูุงุนู ูุน ุฃุฏูุงุชู ูุจูุงูุงุชู.

## ููุงุฐุง ุงูุฃูุงู ููู ูุฎูุงุฏู MCP  

ุชุฎูู ุฃู ุฎุงุฏู MCP ุงูุฎุงุต ุจู ูุญุชูู ุนูู ุฃุฏุงุฉ ูููููุง ุฅุฑุณุงู ุฑุณุงุฆู ุจุฑูุฏ ุฅููุชุฑููู ุฃู ุงููุตูู ุฅูู ูุงุนุฏุฉ ุจูุงูุงุช ุงูุนููุงุก. ุฎุงุฏู ุบูุฑ ูุคูู ูุนูู ุฃู ุฃู ุดุฎุต ููููู ุงุณุชุฎุฏุงู ุชูู ุงูุฃุฏุงุฉุ ููุง ูุคุฏู ุฅูู ูุตูู ุบูุฑ ูุตุฑุญ ุจู ููุจูุงูุงุชุ ุฃู ุฅุฑุณุงู ุฑุณุงุฆู ูุฒุนุฌุฉุ ุฃู ุฃูุดุทุฉ ุฎุจูุซุฉ ุฃุฎุฑู.

ูู ุฎูุงู ุชูููุฐ ุงููุตุงุฏูุฉุ ุชุถูู ุฃู ูู ุทูุจ ุฅูู ุฎุงุฏูู ูุชู ุงูุชุญูู ูููุ ูุคูุฏูุง ูููุฉ ุงููุณุชุฎุฏู ุฃู ุงูุชุทุจูู ุงูุฐู ูุฑุณู ุงูุทูุจ. ูุฐู ูู ุงูุฎุทูุฉ ุงูุฃููู ูุงูุฃูู ูู ุชุฃููู ุณูุฑ ุนูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงูุฎุงุต ุจู.

## ููุฏูุฉ ุฅูู Microsoft Entra ID  

[**Microsoft Entra ID**](https://adoption.microsoft.com/microsoft-security/entra/) ูู ุฎุฏูุฉ ุฅุฏุงุฑุฉ ูููุฉ ููุตูู ูุงุฆูุฉ ุนูู ุงูุณุญุงุจุฉ. ููุฑ ูููุง ูุญุงุฑุณ ุฃููู ุดุงูู ูุชุทุจููุงุชู. ุชุชููู ุนูููุฉ ุงูุชุญูู ุงููุนูุฏุฉ ููููุงุช ุงููุณุชุฎุฏููู (ุงููุตุงุฏูุฉ) ูุชุญุฏูุฏ ูุง ููุณูุญ ููู ุจู (ุงูุชูููุถ).

ุจุงุณุชุฎุฏุงู Entra IDุ ููููู:

- ุชูููู ุชุณุฌูู ุฏุฎูู ุขูู ูููุณุชุฎุฏููู.  
- ุญูุงูุฉ ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ูุงูุฎุฏูุงุช.  
- ุฅุฏุงุฑุฉ ุณูุงุณุงุช ุงููุตูู ูู ูููุน ูุฑูุฒู.

ุจุงููุณุจุฉ ูุฎูุงุฏู MCPุ ุชููุฑ Entra ID ุญูุงู ููููุง ูููุซูููุง ุนูู ูุทุงู ูุงุณุน ูุฅุฏุงุฑุฉ ูู ููููู ุงููุตูู ุฅูู ูุฏุฑุงุช ุฎุงุฏูู.

---

## ููู ุงูุณุญุฑ: ููู ุชุนูู ูุตุงุฏูุฉ Entra ID  

ุชุณุชุฎุฏู Entra ID ูุนุงููุฑ ููุชูุญุฉ ูุซู **OAuth 2.0** ููุชุนุงูู ูุน ุงููุตุงุฏูุฉ. ุฑุบู ุฃู ุงูุชูุงุตูู ูุฏ ุชููู ูุนูุฏุฉุ ูุฅู ุงูููููู ุงูุฃุณุงุณู ุจุณูุท ููููู ูููู ูู ุฎูุงู ุชุดุจูู.

### ููุฏูุฉ ุจุณูุทุฉ ุฅูู OAuth 2.0: ููุชุงุญ ุฎุฏูุฉ ุตู ุงูุณูุงุฑุงุช  

ููุฑ ูู OAuth 2.0 ูุฎุฏูุฉ ุตู ุณูุงุฑุงุช ูุณูุงุฑุชู. ุนูุฏูุง ุชุตู ุฅูู ูุทุนูุ ูุง ุชุนุทู ุตู ุงูุณูุงุฑุงุช ููุชุงุญู ุงูุฑุฆูุณู. ุจุฏูุงู ูู ุฐููุ ุชุนุทูู **ููุชุงุญ ุฎุฏูุฉ ุตู ุงูุณูุงุฑุงุช** ุงูุฐู ูู ุตูุงุญูุงุช ูุญุฏูุฏุฉ โ ููููู ุชุดุบูู ุงูุณูุงุฑุฉ ูููู ุงูุฃุจูุงุจุ ูููู ูุง ูุณุชุทูุน ูุชุญ ุงูุตูุฏูู ุงูุฎููู ุฃู ุงูุฏุฑุฌ ุงูุฌุงูุจู.

ูู ูุฐุง ุงูุชุดุจูู:

- **ุฃูุช** ูู **ุงููุณุชุฎุฏู**.  
- **ุณูุงุฑุชู** ูู **ุฎุงุฏู MCP** ูุน ุฃุฏูุงุชู ูุจูุงูุงุชู ุงููููุฉ.  
- **ุฎุฏูุฉ ุตู ุงูุณูุงุฑุงุช** ูู **Microsoft Entra ID**.  
- **ููุธู ุงููููู** ูู **ุนููู MCP** (ุงูุชุทุจูู ุงูุฐู ูุญุงูู ุงููุตูู ุฅูู ุงูุฎุงุฏู).  
- **ููุชุงุญ ุฎุฏูุฉ ุตู ุงูุณูุงุฑุงุช** ูู **ุฑูุฒ ุงููุตูู (Access Token)**.

ุฑูุฒ ุงููุตูู ูู ุณูุณูุฉ ูุตูุฉ ุขููุฉ ูุชููุงูุง ุนููู MCP ูู Entra ID ุจุนุฏ ุชุณุฌูู ุฏุฎููู. ุซู ููุฏู ุงูุนููู ูุฐุง ุงูุฑูุฒ ุฅูู ุฎุงุฏู MCP ูุน ูู ุทูุจ. ูููู ููุฎุงุฏู ุงูุชุญูู ูู ุงูุฑูุฒ ููุชุฃูุฏ ูู ุฃู ุงูุทูุจ ุดุฑุนู ูุฃู ุงูุนููู ูุฏูู ุงูุฃุฐููุงุช ุงููุงุฒูุฉุ ูู ุฐูู ุฏูู ุงูุญุงุฌุฉ ุฅูู ุงูุชุนุงูู ูุน ุจูุงูุงุช ุงุนุชูุงุฏู ุงูุญููููุฉ (ูุซู ูููุฉ ุงููุฑูุฑ).

### ุชุฏูู ุงููุตุงุฏูุฉ  

ุฅููู ููู ูุนูู ูุฐุง ุนููููุง:

```mermaid
sequenceDiagram
    actor User as ๐ค User
    participant Client as ๐ฅ๏ธ MCP Client
    participant Entra as ๐ Microsoft Entra ID
    participant Server as ๐ง MCP Server

    Client->>+User: Please sign in to continue.
    User->>+Entra: Enters credentials (username/password).
    Entra-->>Client: Here is your access token.
    User-->>-Client: (Returns to the application)

    Client->>+Server: I need to use a tool. Here is my access token.
    Server->>+Entra: Is this access token valid?
    Entra-->>-Server: Yes, it is.
    Server-->>-Client: Token is valid. Here is the result of the tool.
```

### ุชูุฏูู ููุชุจุฉ ูุตุงุฏูุฉ Microsoft (MSAL)  

ูุจู ุงูุบูุต ูู ุงูููุฏุ ูู ุงูููู ุชูุฏูู ูููู ุฑุฆูุณู ุณุชุฑุงู ูู ุงูุฃูุซูุฉ: **ููุชุจุฉ ูุตุงุฏูุฉ Microsoft (MSAL)**.

MSAL ูู ููุชุจุฉ ุทูุฑุชูุง Microsoft ุชุณูู ุนูู ุงููุทูุฑูู ุงูุชุนุงูู ูุน ุงููุตุงุฏูุฉ. ุจุฏูุงู ูู ูุชุงุจุฉ ูู ุงูููุฏ ุงููุนูุฏ ูุฅุฏุงุฑุฉ ุฑููุฒ ุงูุฃูุงูุ ูุชุณุฌูู ุงูุฏุฎููุ ูุชุฌุฏูุฏ ุงูุฌูุณุงุชุ ุชุชููู MSAL ูุฐู ุงูููุงู ุงูุซูููุฉ.

ุงุณุชุฎุฏุงู ููุชุจุฉ ูุซู MSAL ููุตู ุจู ุจุดุฏุฉ ูุฃููุง:

- **ุขููุฉ:** ุชููุฐ ุจุฑูุชููููุงุช ููุนุงููุฑ ุฃูุงู ูุนุชูุฏุฉุ ููุง ูููู ูู ูุฎุงุทุฑ ุงูุซุบุฑุงุช ูู ุงูููุฏ.  
- **ุชุจุณุท ุงูุชุทููุฑ:** ุชุฎูู ุชุนููุฏุงุช ุจุฑูุชููููุงุช OAuth 2.0 ูOpenID Connectุ ููุง ูุณูุญ ูู ุจุฅุถุงูุฉ ูุตุงุฏูุฉ ูููุฉ ูุชุทุจููู ุจุจุถุน ุฃุณุทุฑ ููุท.  
- **ูุฏุนููุฉ:** ุชููู Microsoft ุจุตูุงูุชูุง ูุชุญุฏูุซูุง ุจุงุณุชูุฑุงุฑ ูููุงุฌูุฉ ุงูุชูุฏูุฏุงุช ุงูุฃูููุฉ ุงูุฌุฏูุฏุฉ ูุชุบููุฑุงุช ุงูููุตุงุช.

ุชุฏุนู MSAL ูุฌููุนุฉ ูุงุณุนุฉ ูู ุงููุบุงุช ูุฃุทุฑ ุงูุนููุ ุจูุง ูู ุฐูู .NETุ JavaScript/TypeScriptุ Pythonุ Javaุ Goุ ูููุตุงุช ุงูููุงุชู ุงููุญูููุฉ ูุซู iOS ูAndroid. ูุฐุง ูุนูู ุฃูู ููููู ุงุณุชุฎุฏุงู ููุณ ุฃููุงุท ุงููุตุงุฏูุฉ ุนุจุฑ ูุงูู ุจูุฆุฉ ุงูุชูููููุฌูุง ุงูุฎุงุตุฉ ุจู.

ููุนุฑูุฉ ุงููุฒูุฏ ุนู MSALุ ููููู ุงูุงุทูุงุน ุนูู ุงููุซุงุฆู ุงูุฑุณููุฉ [ูุธุฑุฉ ุนุงูุฉ ุนูู MSAL](https://learn.microsoft.com/entra/identity-platform/msal-overview).

---

## ุชุฃููู ุฎุงุฏู MCP ุงูุฎุงุต ุจู ุจุงุณุชุฎุฏุงู Entra ID: ุฏููู ุฎุทูุฉ ุจุฎุทูุฉ  

ุงูุขูุ ุฏุนูุง ูุณุชุนุฑุถ ููููุฉ ุชุฃููู ุฎุงุฏู MCP ูุญูู (ูุชูุงุตู ุนุจุฑ `stdio`) ุจุงุณุชุฎุฏุงู Entra ID. ูุณุชุฎุฏู ูุฐุง ุงููุซุงู **ุนููููุง ุนุงููุง**ุ ููู ููุงุณุจ ููุชุทุจููุงุช ุงูุชู ุชุนูู ุนูู ุฌูุงุฒ ุงููุณุชุฎุฏูุ ูุซู ุชุทุจูู ุณุทุญ ุงูููุชุจ ุฃู ุฎุงุฏู ุชุทููุฑ ูุญูู.

### ุงูุณููุงุฑูู 1: ุชุฃููู ุฎุงุฏู MCP ูุญูู (ูุน ุนููู ุนุงู)  

ูู ูุฐุง ุงูุณููุงุฑููุ ุณููุธุฑ ูู ุฎุงุฏู MCP ูุนูู ูุญูููุงุ ูุชูุงุตู ุนุจุฑ `stdio`ุ ููุณุชุฎุฏู Entra ID ููุตุงุฏูุฉ ุงููุณุชุฎุฏู ูุจู ุงูุณูุงุญ ุจุงููุตูู ุฅูู ุฃุฏูุงุชู. ุณูููู ูุฏู ุงูุฎุงุฏู ุฃุฏุงุฉ ูุงุญุฏุฉ ุชุณุชุฑุฌุน ูุนูููุงุช ููู ุงููุณุชุฎุฏู ูู Microsoft Graph API.

#### 1. ุฅุนุฏุงุฏ ุงูุชุทุจูู ูู Entra ID  

ูุจู ูุชุงุจุฉ ุฃู ููุฏุ ุชุญุชุงุฌ ุฅูู ุชุณุฌูู ุชุทุจููู ูู Microsoft Entra ID. ูุฐุง ููุนูู Entra ID ุนู ุชุทุจููู ููููุญู ุงูุฅุฐู ูุงุณุชุฎุฏุงู ุฎุฏูุฉ ุงููุตุงุฏูุฉ.

1. ุงูุชูู ุฅูู **[ุจูุงุจุฉ Microsoft Entra](https://entra.microsoft.com/)**.  
2. ุงุฐูุจ ุฅูู **ุชุณุฌููุงุช ุงูุชุทุจููุงุช** ูุงููุฑ ุนูู **ุชุณุฌูู ุฌุฏูุฏ**.  
3. ุงููุญ ุชุทุจููู ุงุณููุง (ูุซู "ุฎุงุฏู MCP ุงููุญูู ุงูุฎุงุต ุจู").  
4. ุจุงููุณุจุฉ ูู **ุฃููุงุน ุงูุญุณุงุจุงุช ุงููุฏุนููุฉ**ุ ุงุฎุชุฑ **ุงูุญุณุงุจุงุช ูู ูุฐุง ุงูุฏููู ุงูุชูุธููู ููุท**.  
5. ููููู ุชุฑู **ุนููุงู URI ูุฅุนุงุฏุฉ ุงูุชูุฌูู** ูุงุฑุบูุง ููุฐุง ุงููุซุงู.  
6. ุงููุฑ ุนูู **ุชุณุฌูู**.

ุจุนุฏ ุงูุชุณุฌููุ ุงุญุชูุธ ุจู **ูุนุฑู ุงูุชุทุจูู (clientId)** ู**ูุนุฑู ุงูุฏููู (tenantId)**. ุณุชุญุชุงุฌ ุฅููููุง ูู ุงูููุฏ.

#### 2. ุงูููุฏ: ุดุฑุญ  

ูููุธุฑ ุฅูู ุงูุฃุฌุฒุงุก ุงูุฑุฆูุณูุฉ ูู ุงูููุฏ ุงูุชู ุชุชุนุงูู ูุน ุงููุตุงุฏูุฉ. ุงูููุฏ ุงููุงูู ููุฐุง ุงููุซุงู ูุชุงุญ ูู ูุฌูุฏ [Entra ID - Local - WAM](https://github.com/Azure-Samples/mcp-auth-servers/tree/main/src/entra-id-local-wam) ูู ูุณุชูุฏุน [mcp-auth-servers ุนูู GitHub](https://github.com/Azure-Samples/mcp-auth-servers).

**`AuthenticationService.cs`**

ูุฐู ุงููุฆุฉ ูุณุคููุฉ ุนู ุงูุชุนุงูู ูุน Entra ID.

- **`CreateAsync`**: ุชููุฆ `PublicClientApplication` ูู MSAL. ูุชู ุชูููููุง ุจุงุณุชุฎุฏุงู `clientId` ู`tenantId` ุงูุฎุงุตูู ุจุชุทุจููู.  
- **`WithBroker`**: ุชุชูุญ ุงุณุชุฎุฏุงู ูุณูุท (ูุซู Windows Web Account Manager)ุ ุงูุฐู ูููุฑ ุชุฌุฑุจุฉ ุชุณุฌูู ุฏุฎูู ููุญุฏุฉ ุฃูุซุฑ ุฃูุงููุง ูุณูุงุณุฉ.  
- **`AcquireTokenAsync`**: ูุฐู ูู ุงูุทุฑููุฉ ุงูุฃุณุงุณูุฉ. ุชุญุงูู ุฃููุงู ุงูุญุตูู ุนูู ุฑูุฒ ุจูุฏูุก (ุฃู ุจุฏูู ูุทุงูุจุฉ ุงููุณุชุฎุฏู ุฅุฐุง ูุงู ูุฏูู ุฌูุณุฉ ุตุงูุญุฉ). ุฅุฐุง ูู ููู ุจุงูุฅููุงู ุงูุญุตูู ุนูู ุฑูุฒ ุจูุฏูุกุ ุณุชุทูุจ ูู ุงููุณุชุฎุฏู ุชุณุฌูู ุงูุฏุฎูู ุจุดูู ุชูุงุนูู.

```csharp
// Simplified for clarity
public static async Task<AuthenticationService> CreateAsync(ILogger<AuthenticationService> logger)
{
    var msalClient = PublicClientApplicationBuilder
        .Create(_clientId) // Your Application (client) ID
        .WithAuthority(AadAuthorityAudience.AzureAdMyOrg)
        .WithTenantId(_tenantId) // Your Directory (tenant) ID
        .WithBroker(new BrokerOptions(BrokerOptions.OperatingSystems.Windows))
        .Build();

    // ... cache registration ...

    return new AuthenticationService(logger, msalClient);
}

public async Task<string> AcquireTokenAsync()
{
    try
    {
        // Try silent authentication first
        var accounts = await _msalClient.GetAccountsAsync();
        var account = accounts.FirstOrDefault();

        AuthenticationResult? result = null;

        if (account != null)
        {
            result = await _msalClient.AcquireTokenSilent(_scopes, account).ExecuteAsync();
        }
        else
        {
            // If no account, or silent fails, go interactive
            result = await _msalClient.AcquireTokenInteractive(_scopes).ExecuteAsync();
        }

        return result.AccessToken;
    }
    catch (Exception ex)
    {
        _logger.LogError(ex, "An error occurred while acquiring the token.");
        throw; // Optionally rethrow the exception for higher-level handling
    }
}
```

**`Program.cs`**

ููุง ูุชู ุฅุนุฏุงุฏ ุฎุงุฏู MCP ูุฏูุฌ ุฎุฏูุฉ ุงููุตุงุฏูุฉ.

- **`AddSingleton<AuthenticationService>`**: ูุณุฌู `AuthenticationService` ูู ุญุงููุฉ ุญูู ุงูุชุจุนูุงุชุ ููุชู ุงุณุชุฎุฏุงูู ูู ูุจู ุฃุฌุฒุงุก ุฃุฎุฑู ูู ุงูุชุทุจูู (ูุซู ุฃุฏุงุชูุง).  
- ุฃุฏุงุฉ **`GetUserDetailsFromGraph`**: ุชุชุทูุจ ูุซูููุง ูู `AuthenticationService`. ูุจู ุฃู ุดูุกุ ุชุณุชุฏุนู `authService.AcquireTokenAsync()` ููุญุตูู ุนูู ุฑูุฒ ูุตูู ุตุงูุญ. ุฅุฐุง ูุฌุญุช ุงููุตุงุฏูุฉุ ุชุณุชุฎุฏู ุงูุฑูุฒ ูุงุณุชุฏุนุงุก Microsoft Graph API ูุฌูุจ ุชูุงุตูู ุงููุณุชุฎุฏู.

```csharp
// Simplified for clarity
[McpServerTool(Name = "GetUserDetailsFromGraph")]
public static async Task<string> GetUserDetailsFromGraph(
    AuthenticationService authService)
{
    try
    {
        // This will trigger the authentication flow
        var accessToken = await authService.AcquireTokenAsync();

        // Use the token to create a GraphServiceClient
        var graphClient = new GraphServiceClient(
            new BaseBearerTokenAuthenticationProvider(new TokenProvider(authService)));

        var user = await graphClient.Me.GetAsync();

        return System.Text.Json.JsonSerializer.Serialize(user);
    }
    catch (Exception ex)
    {
        return $"Error: {ex.Message}";
    }
}
```

#### 3. ููู ูุนูู ูู ุดูุก ูุนูุง  

1. ุนูุฏูุง ูุญุงูู ุนููู MCP ุงุณุชุฎุฏุงู ุฃุฏุงุฉ `GetUserDetailsFromGraph`ุ ุชุณุชุฏุนู ุงูุฃุฏุงุฉ ุฃููุงู `AcquireTokenAsync`.  
2. ุชููู `AcquireTokenAsync` ุจุชุญููุฒ ููุชุจุฉ MSAL ููุชุญูู ูู ูุฌูุฏ ุฑูุฒ ุตุงูุญ.  
3. ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูู ุฑูุฒุ ุณุชุทูุจ MSALุ ุนุจุฑ ุงููุณูุทุ ูู ุงููุณุชุฎุฏู ุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู ุญุณุงุจ Entra ID ุงูุฎุงุต ุจู.  
4. ุจุนุฏ ุชุณุฌูู ุงูุฏุฎููุ ุชุตุฏุฑ Entra ID ุฑูุฒ ูุตูู.  
5. ุชุณุชูู ุงูุฃุฏุงุฉ ุงูุฑูุฒ ูุชุณุชุฎุฏูู ูุฅุฌุฑุงุก ุงุชุตุงู ุขูู ุฅูู Microsoft Graph API.  
6. ุชูุนุงุฏ ุชูุงุตูู ุงููุณุชุฎุฏู ุฅูู ุนููู MCP.

ุชุถูู ูุฐู ุงูุนูููุฉ ุฃู ุงููุณุชุฎุฏููู ุงููุตุงุฏู ุนูููู ููุท ูููููู ุงุณุชุฎุฏุงู ุงูุฃุฏุงุฉุ ููุง ูุคูู ุฎุงุฏู MCP ุงููุญูู ุงูุฎุงุต ุจู ุจูุนุงููุฉ.

### ุงูุณููุงุฑูู 2: ุชุฃููู ุฎุงุฏู MCP ุจุนูุฏ (ูุน ุนููู ุณุฑู)  

ุนูุฏูุง ูุนูู ุฎุงุฏู MCP ุงูุฎุงุต ุจู ุนูู ุฌูุงุฒ ุจุนูุฏ (ูุซู ุฎุงุฏู ุณุญุงุจู) ููุชูุงุตู ุนุจุฑ ุจุฑูุชูููู ูุซู HTTP Streamingุ ุชุฎุชูู ูุชุทูุจุงุช ุงูุฃูุงู. ูู ูุฐู ุงูุญุงูุฉุ ูุฌุจ ุงุณุชุฎุฏุงู **ุนููู ุณุฑู** ู**ุชุฏูู ุฑูุฒ ุงูุชูููุถ (Authorization Code Flow)**. ูุฐู ุทุฑููุฉ ุฃูุซุฑ ุฃูุงููุง ูุฃู ุฃุณุฑุงุฑ ุงูุชุทุจูู ูุง ุชูุนุฑุถ ุฃุจุฏูุง ูู ุงููุชุตูุญ.

ูุณุชุฎุฏู ูุฐุง ุงููุซุงู ุฎุงุฏู MCP ูุจูู ุนูู TypeScript ูุณุชุฎุฏู Express.js ููุชุนุงูู ูุน ุทูุจุงุช HTTP.

#### 1. ุฅุนุฏุงุฏ ุงูุชุทุจูู ูู Entra ID  

ุงูุฅุนุฏุงุฏ ูู Entra ID ูุดุงุจู ููุนููู ุงูุนุงูุ ููู ูุน ุงุฎุชูุงู ุฑุฆูุณู: ุชุญุชุงุฌ ุฅูู ุฅูุดุงุก **ุณุฑ ุนููู (client secret)**.

1. ุงูุชูู ุฅูู **[ุจูุงุจุฉ Microsoft Entra](https://entra.microsoft.com/)**.  
2. ูู ุชุณุฌูู ุชุทุจูููุ ุงุฐูุจ ุฅูู ุชุจููุจ **ุงูุดูุงุฏุงุช ูุงูุฃุณุฑุงุฑ**.  
3. ุงููุฑ ุนูู **ุณุฑ ุนููู ุฌุฏูุฏ**ุ ุฃุนุทู ูุตููุงุ ุซู ุงููุฑ ุนูู **ุฅุถุงูุฉ**.  
4. **ููุงุญุธุฉ ุฃูููุฉ ูููุฉ:** ุงูุณุฎ ูููุฉ ุงูุณุฑ ููุฑูุง. ูู ุชุชููู ูู ุฑุคูุชูุง ูุฑุฉ ุฃุฎุฑู.  
5. ุชุญุชุงุฌ ุฃูุถูุง ุฅูู ุชูููู **ุนููุงู URI ูุฅุนุงุฏุฉ ุงูุชูุฌูู**. ุงุฐูุจ ุฅูู ุชุจููุจ **ุงููุตุงุฏูุฉ**ุ ุงููุฑ ุนูู **ุฅุถุงูุฉ ููุตุฉ**ุ ุงุฎุชุฑ **ููุจ**ุ ูุฃุฏุฎู ุนููุงู URI ูุฅุนุงุฏุฉ ุงูุชูุฌูู ูุชุทุจููู (ูุซู `http://localhost:3001/auth/callback`).

> **โ๏ธ ููุงุญุธุฉ ุฃูููุฉ ูููุฉ:** ููุชุทุจููุงุช ุงูุฅูุชุงุฌูุฉุ ุชูุตู Microsoft ุจุดุฏุฉ ุจุงุณุชุฎุฏุงู ุทุฑู ูุตุงุฏูุฉ ุจุฏูู ุฃุณุฑุงุฑ ูุซู **Managed Identity** ุฃู **Workload Identity Federation** ุจุฏูุงู ูู ุฃุณุฑุงุฑ ุงูุนููุงุก. ุฃุณุฑุงุฑ ุงูุนููุงุก ุชุดูู ูุฎุงุทุฑ ุฃูููุฉ ูุฃููุง ูุฏ ุชููุดู ุฃู ุชูุฎุชุฑู. ุชููุฑ ุงููููุงุช ุงูููุฏุงุฑุฉ ููุฌูุง ุฃูุซุฑ ุฃูุงููุง ูู ุฎูุงู ุฅุฒุงูุฉ ุงูุญุงุฌุฉ ูุชุฎุฒูู ุจูุงูุงุช ุงูุงุนุชูุงุฏ ูู ุงูููุฏ ุฃู ุงูุชูููู.  
>  
> ููุฒูุฏ ูู ุงููุนูููุงุช ุญูู ุงููููุงุช ุงูููุฏุงุฑุฉ ูููููุฉ ุชูููุฐูุงุ ุฑุงุฌุน [ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููููุงุช ุงูููุฏุงุฑุฉ ูููุงุฑุฏ Azure](https://learn.microsoft.com/entra/identity/managed-identities-azure-resources/overview).

#### 2. ุงูููุฏ: ุดุฑุญ  

ูุณุชุฎุฏู ูุฐุง ุงููุซุงู ููุฌูุง ูุงุฆููุง ุนูู ุงูุฌูุณุฉ. ุนูุฏ ูุตุงุฏูุฉ ุงููุณุชุฎุฏูุ ูุฎุฒู ุงูุฎุงุฏู ุฑูุฒ ุงููุตูู ูุฑูุฒ ุงูุชุญุฏูุซ ูู ุงูุฌูุณุฉ ููุนุทู ุงููุณุชุฎุฏู ุฑูุฒ ุฌูุณุฉ. ููุณุชุฎุฏู ุฑูุฒ ุงูุฌูุณุฉ ูุฐุง ููุทูุจุงุช ุงููุงุญูุฉ. ุงูููุฏ ุงููุงูู ููุฐุง ุงููุซุงู ูุชุงุญ ูู ูุฌูุฏ [Entra ID - Confidential client](https://github.com/Azure-Samples/mcp-auth-servers/tree/main/src/entra-id-cca-session) ูู ูุณุชูุฏุน [mcp-auth-servers ุนูู GitHub](https://github.com/Azure-Samples/mcp-auth-servers).

**`Server.ts`**

ูุนุฏ ูุฐุง ุงูููู ุฎุงุฏู Express ูุทุจูุฉ ููู MCP.

- **`requireBearerAuth`**: ูุฐุง ููุฏูููุฑ ูุญูู ููุงุท ุงูููุงูุฉ `/sse` ู`/message`. ูุชุญูู ูู ูุฌูุฏ ุฑูุฒ ุญุงูู ุตุงูุญ ูู ุฑุฃุณ `Authorization` ููุทูุจ.  
- **`EntraIdServerAuthProvider`**: ูุฆุฉ ูุฎุตุตุฉ ุชููุฐ ูุงุฌูุฉ `McpServerAuthorizationProvider`. ูุณุคููุฉ ุนู ุงูุชุนุงูู ูุน ุชุฏูู OAuth 2.0.  
- **`/auth/callback`**: ููุทุฉ ุงูููุงูุฉ ุงูุชู ุชุชุนุงูู ูุน ุฅุนุงุฏุฉ ุงูุชูุฌูู ูู Entra ID ุจุนุฏ ูุตุงุฏูุฉ ุงููุณุชุฎุฏู. ุชููู ุจุชุจุฏูู ุฑูุฒ ุงูุชูููุถ ุจุฑูุฒ ูุตูู ูุฑูุฒ ุชุญุฏูุซ.

```typescript
// Simplified for clarity
const app = express();
const { server } = createServer();
const provider = new EntraIdServerAuthProvider();

// Protect the SSE endpoint
app.get("/sse", requireBearerAuth({
  provider,
  requiredScopes: ["User.Read"]
}), async (req, res) => {
  // ... connect to the transport ...
});

// Protect the message endpoint
app.post("/message", requireBearerAuth({
  provider,
  requiredScopes: ["User.Read"]
}), async (req, res) => {
  // ... handle the message ...
});

// Handle the OAuth 2.0 callback
app.get("/auth/callback", (req, res) => {
  provider.handleCallback(req.query.code, req.query.state)
    .then(result => {
      // ... handle success or failure ...
    });
});
```

**`Tools.ts`**

ูุญุฏุฏ ูุฐุง ุงูููู ุงูุฃุฏูุงุช ุงูุชู ูููุฑูุง ุฎุงุฏู MCP. ุฃุฏุงุฉ `getUserDetails` ูุดุงุจูุฉ ููุฃุฏุงุฉ ูู ุงููุซุงู ุงูุณุงุจูุ ููููุง ุชุญุตู ุนูู ุฑูุฒ ุงููุตูู ูู ุงูุฌูุณุฉ.

```typescript
// Simplified for clarity
server.setRequestHandler(CallToolRequestSchema, async (request) => {
  const { name } = request.params;
  const context = request.params?.context as { token?: string } | undefined;
  const sessionToken = context?.token;

  if (name === ToolName.GET_USER_DETAILS) {
    if (!sessionToken) {
      throw new AuthenticationError("Authentication token is missing or invalid. Ensure the token is provided in the request context.");
    }

    // Get the Entra ID token from the session store
    const tokenData = tokenStore.getToken(sessionToken);
    const entraIdToken = tokenData.accessToken;

    const graphClient = Client.init({
      authProvider: (done) => {
        done(null, entraIdToken);
      }
    });

    const user = await graphClient.api('/me').get();

    // ... return user details ...
  }
});
```

**`auth/EntraIdServerAuthProvider.ts`**

ุชุชุนุงูู ูุฐู ุงููุฆุฉ ูุน ุงูููุทู ุงูุฎุงุต ุจู:

- ุฅุนุงุฏุฉ ุชูุฌูู ุงููุณุชุฎุฏู ุฅูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู ูู Entra ID.  
- ุชุจุฏูู ุฑูุฒ ุงูุชูููุถ ุจุฑูุฒ ูุตูู.  
- ุชุฎุฒูู ุงูุฑููุฒ ูู `tokenStore`.  
- ุชุฌุฏูุฏ ุฑูุฒ ุงููุตูู ุนูุฏ ุงูุชูุงุก ุตูุงุญูุชู.

#### 3. ููู ูุนูู ูู ุดูุก ูุนูุง  

1. ุนูุฏูุง ูุญุงูู ุงููุณุชุฎุฏู ุงูุงุชุตุงู ุจุฎุงุฏู MCP ูุฃูู ูุฑุฉุ ุณูุฑู ููุฏูููุฑ `requireBearerAuth` ุฃูู ูุง ูููู ุฌูุณุฉ ุตุงูุญุฉ ูุณูุนูุฏ ุชูุฌููู ุฅูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู ูู Entra ID.  
2. ูููู ุงููุณุชุฎุฏู ุจุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู ุญุณุงุจ Entra ID ุงูุฎุงุต ุจู.  
3. ุชุนูุฏ Entra ID ุชูุฌูู ุงููุณุชุฎุฏู ุฅูู ููุทุฉ ุงูููุงูุฉ `/auth/callback` ูุน ุฑูุฒ ุชูููุถ.
4. ูููู ุงูุฎุงุฏู ุจุชุจุงุฏู ุงูุฑูุฒ ููุญุตูู ุนูู ุฑูุฒ ูุตูู ูุฑูุฒ ุชุญุฏูุซุ ุซู ูุฎุฒูููุง ูููุดุฆ ุฑูุฒ ุฌูุณุฉ ูุชู ุฅุฑุณุงูู ุฅูู ุงูุนููู.  
5. ูููู ููุนููู ุงูุขู ุงุณุชุฎุฏุงู ุฑูุฒ ุงูุฌูุณุฉ ูุฐุง ูู ุฑุฃุณ `Authorization` ูุฌููุน ุงูุทูุจุงุช ุงููุณุชูุจููุฉ ุฅูู ุฎุงุฏู MCP.  
6. ุนูุฏ ุงุณุชุฏุนุงุก ุฃุฏุงุฉ `getUserDetails`ุ ุชุณุชุฎุฏู ุฑูุฒ ุงูุฌูุณุฉ ููุจุญุซ ุนู ุฑูุฒ ูุตูู Entra ID ุซู ุชุณุชุฎุฏูู ูุงุณุชุฏุนุงุก Microsoft Graph API.

ูุฐุง ุงูุชุฏูู ุฃูุซุฑ ุชุนููุฏูุง ูู ุชุฏูู ุงูุนููู ุงูุนุงูุ ูููู ุถุฑูุฑู ูููุงุท ุงูููุงูุฉ ุงูุชู ุชูุงุฌู ุงูุฅูุชุฑูุช. ูุธุฑูุง ูุฃู ุฎูุงุฏู MCP ุงูุจุนูุฏุฉ ูุชุงุญุฉ ุนุจุฑ ุงูุฅูุชุฑูุช ุงูุนุงูุ ููู ุชุญุชุงุฌ ุฅูู ุชุฏุงุจูุฑ ุฃูุงู ุฃููู ููุญูุงูุฉ ูู ุงููุตูู ุบูุฑ ุงููุตุฑุญ ุจู ูุงููุฌูุงุช ุงููุญุชููุฉ.

## ุฃูุถู ููุงุฑุณุงุช ุงูุฃูุงู

- **ุงุณุชุฎุฏู HTTPS ุฏุงุฆููุง**: ูู ุจุชุดููุฑ ุงูุงุชุตุงู ุจูู ุงูุนููู ูุงูุฎุงุฏู ูุญูุงูุฉ ุงูุฑููุฒ ูู ุงูุงุนุชุฑุงุถ.  
- **ุชุทุจูู ุงูุชุญูู ูู ุงููุตูู ุจูุงุกู ุนูู ุงูุฏูุฑ (RBAC)**: ูุง ุชุชุญูู ููุท ููุง ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุตุฏููุงุ ุจู ุชุญูู ููุง ูู ูุฎูู ูู ุงูููุงู ุจู. ููููู ุชุนุฑูู ุงูุฃุฏูุงุฑ ูู Entra ID ูุงูุชุญูู ูููุง ูู ุฎุงุฏู MCP ุงูุฎุงุต ุจู.  
- **ุงููุฑุงูุจุฉ ูุงูุชุฏููู**: ุณุฌูู ุฌููุน ุฃุญุฏุงุซ ุงููุตุงุฏูุฉ ุญุชู ุชุชููู ูู ุงูุชุดุงู ุงููุดุงุท ุงููุดุจูู ูุงูุงุณุชุฌุงุจุฉ ูู.  
- **ุงูุชุนุงูู ูุน ุชุญุฏูุฏ ุงููุนุฏู ูุงูุญุฏ ูู ุงูุทูุจุงุช**: ุชููู Microsoft Graph ููุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุงูุฃุฎุฑู ุจุชุทุจูู ุชุญุฏูุฏ ุงููุนุฏู ูููุน ุณูุก ุงูุงุณุชุฎุฏุงู. ููุฐ ููุทู ุงูุชุฑุงุฌุน ุงูุฃุณู ูุฅุนุงุฏุฉ ุงููุญุงููุฉ ูู ุฎุงุฏู MCP ุงูุฎุงุต ุจู ููุชุนุงูู ุจุณูุงุณุฉ ูุน ุงุณุชุฌุงุจุงุช HTTP 429 (ุทูุจุงุช ูุซูุฑุฉ ุฌุฏูุง). ููุฑ ูู ุชุฎุฒูู ุงูุจูุงูุงุช ุงูุชู ูุชู ุงููุตูู ุฅูููุง ุจุดูู ูุชูุฑุฑ ูุคูุชูุง ูุชูููู ุนุฏุฏ ุงุณุชุฏุนุงุกุงุช API.  
- **ุชุฎุฒูู ุงูุฑููุฒ ุจุฃูุงู**: ุฎุฒูู ุฑููุฒ ุงููุตูู ูุฑููุฒ ุงูุชุญุฏูุซ ุจุดูู ุขูู. ููุชุทุจููุงุช ุงููุญููุฉุ ุงุณุชุฎุฏู ุขููุงุช ุงูุชุฎุฒูู ุงูุขูู ูููุธุงู. ููุชุทุจููุงุช ุงูุฎุงุฏูุฉุ ููุฑ ูู ุงุณุชุฎุฏุงู ุงูุชุฎุฒูู ุงููุดูุฑ ุฃู ุฎุฏูุงุช ุฅุฏุงุฑุฉ ุงูููุงุชูุญ ุงูุขููุฉ ูุซู Azure Key Vault.  
- **ุงูุชุนุงูู ูุน ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฑููุฒ**: ูุฑููุฒ ุงููุตูู ุนูุฑ ูุญุฏูุฏ. ููุฐ ุชุญุฏูุซูุง ุชููุงุฆููุง ููุฑููุฒ ุจุงุณุชุฎุฏุงู ุฑููุฒ ุงูุชุญุฏูุซ ููุญูุงุธ ุนูู ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ ุฏูู ุงูุญุงุฌุฉ ูุฅุนุงุฏุฉ ุงููุตุงุฏูุฉ.  
- **ููุฑ ูู ุงุณุชุฎุฏุงู Azure API Management**: ุจูููุง ูููุญู ุชูููุฐ ุงูุฃูุงู ูุจุงุดุฑุฉ ูู ุฎุงุฏู MCP ุชุญูููุง ุฏููููุงุ ูููู ูุจูุงุจุงุช API ูุซู Azure API Management ุงูุชุนุงูู ูุน ุงูุนุฏูุฏ ูู ูุฐู ุงููุถุงูุง ุงูุฃูููุฉ ุชููุงุฆููุงุ ุจูุง ูู ุฐูู ุงููุตุงุฏูุฉุ ุงูุชูููุถุ ุชุญุฏูุฏ ุงููุนุฏูุ ูุงููุฑุงูุจุฉ. ููู ุชููุฑ ุทุจูุฉ ุฃูุงู ูุฑูุฒูุฉ ุชูุน ุจูู ุนููุงุฆู ูุฎูุงุฏู MCP ุงูุฎุงุตุฉ ุจู. ููุฒูุฏ ูู ุงูุชูุงุตูู ุญูู ุงุณุชุฎุฏุงู ุจูุงุจุงุช API ูุน MCPุ ุฑุงุฌุน [Azure API Management Your Auth Gateway For MCP Servers](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690).

## ุงูููุงุท ุงูุฑุฆูุณูุฉ

- ุชุฃููู ุฎุงุฏู MCP ุงูุฎุงุต ุจู ุฃูุฑ ุญููู ูุญูุงูุฉ ุจูุงูุงุชู ูุฃุฏูุงุชู.  
- ูููุฑ Microsoft Entra ID ุญูุงู ููููุง ููุงุจููุง ููุชูุณุน ูููุตุงุฏูุฉ ูุงูุชูููุถ.  
- ุงุณุชุฎุฏู **ุงูุนููู ุงูุนุงู** ููุชุทุจููุงุช ุงููุญููุฉ ู**ุงูุนููู ุงูุณุฑู** ููุฎูุงุฏู ุงูุจุนูุฏุฉ.  
- ูุนุฏ **ุชุฏูู ุฑูุฒ ุงูุชูููุถ** ุงูุฎูุงุฑ ุงูุฃูุซุฑ ุฃูุงููุง ูุชุทุจููุงุช ุงูููุจ.

## ุงูุชูุฑูู

1. ููุฑ ูู ุฎุงุฏู MCP ูุฏ ุชุจููู. ูู ุณูููู ุฎุงุฏููุง ูุญูููุง ุฃู ุฎุงุฏููุง ุจุนูุฏูุงุ  
2. ุจูุงุกู ุนูู ุฅุฌุงุจุชูุ ูู ุณุชุณุชุฎุฏู ุนููููุง ุนุงููุง ุฃู ุณุฑููุงุ  
3. ูุง ุงูุฃุฐููุงุช ุงูุชู ุณูุทูุจูุง ุฎุงุฏู MCP ุงูุฎุงุต ุจู ูุฃุฏุงุก ุงูุฅุฌุฑุงุกุงุช ุถุฏ Microsoft Graphุ

## ุงูุชูุงุฑูู ุงูุนูููุฉ

### ุงูุชูุฑูู 1: ุชุณุฌูู ุชุทุจูู ูู Entra ID  
ุงูุชูู ุฅูู ุจูุงุจุฉ Microsoft Entra.  
ุณุฌู ุชุทุจูููุง ุฌุฏูุฏูุง ูุฎุงุฏู MCP ุงูุฎุงุต ุจู.  
ุณุฌู ูุนุฑู ุงูุชุทุจูู (ุงูุนููู) ููุนุฑู ุงูุฏููู (ุงููุณุชุฃุฌุฑ).

### ุงูุชูุฑูู 2: ุชุฃููู ุฎุงุฏู MCP ูุญูู (ุนููู ุนุงู)  
- ุงุชุจุน ูุซุงู ุงูููุฏ ูุฏูุฌ MSAL (ููุชุจุฉ ูุตุงุฏูุฉ Microsoft) ููุตุงุฏูุฉ ุงููุณุชุฎุฏู.  
- ุงุฎุชุจุฑ ุชุฏูู ุงููุตุงุฏูุฉ ูู ุฎูุงู ุงุณุชุฏุนุงุก ุฃุฏุงุฉ MCP ุงูุชู ุชุฌูุจ ุชูุงุตูู ุงููุณุชุฎุฏู ูู Microsoft Graph.

### ุงูุชูุฑูู 3: ุชุฃููู ุฎุงุฏู MCP ุจุนูุฏ (ุนููู ุณุฑู)  
- ุณุฌู ุนููููุง ุณุฑููุง ูู Entra ID ูุฃูุดุฆ ุณุฑ ุนููู.  
- ูู ุจุชูููู ุฎุงุฏู MCP ุงูุฎุงุต ุจู ุจุงุณุชุฎุฏุงู Express.js ูุงุณุชุฎุฏุงู ุชุฏูู ุฑูุฒ ุงูุชูููุถ.  
- ุงุฎุชุจุฑ ููุงุท ุงูููุงูุฉ ุงููุญููุฉ ูุชุฃูุฏ ูู ุงููุตูู ุงููุนุชูุฏ ุนูู ุงูุฑููุฒ.

### ุงูุชูุฑูู 4: ุชุทุจูู ุฃูุถู ููุงุฑุณุงุช ุงูุฃูุงู  
- ูุนูู HTTPS ูุฎุงุฏูู ุงููุญูู ุฃู ุงูุจุนูุฏ.  
- ููุฐ ุงูุชุญูู ูู ุงููุตูู ุจูุงุกู ุนูู ุงูุฏูุฑ (RBAC) ูู ููุทู ุงูุฎุงุฏู.  
- ุฃุถู ุงูุชุนุงูู ูุน ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฑููุฒ ูุชุฎุฒูู ุงูุฑููุฒ ุจุฃูุงู.

## ุงูููุงุฑุฏ

1. **ุชูุซูู ูุธุฑุฉ ุนุงูุฉ ุนูู MSAL**  
   ุชุนุฑูู ุนูู ููููุฉ ุชูููู ููุชุจุฉ ูุตุงุฏูุฉ Microsoft (MSAL) ูุงูุชุณุงุจ ุงูุฑููุฒ ุจุฃูุงู ุนุจุฑ ุงูููุตุงุช:  
   [MSAL Overview on Microsoft Learn](https://learn.microsoft.com/en-gb/entra/msal/overview)

2. **ูุณุชูุฏุน GitHub Azure-Samples/mcp-auth-servers**  
   ุชุทุจููุงุช ูุฑุฌุนูุฉ ูุฎูุงุฏู MCP ุชูุถุญ ุชุฏููุงุช ุงููุตุงุฏูุฉ:  
   [Azure-Samples/mcp-auth-servers on GitHub](https://github.com/Azure-Samples/mcp-auth-servers)

3. **ูุธุฑุฉ ุนุงูุฉ ุนูู Managed Identities ูููุงุฑุฏ Azure**  
   ููู ููููุฉ ุงูุชุฎูุต ูู ุงูุฃุณุฑุงุฑ ุจุงุณุชุฎุฏุงู ุงููููุงุช ุงูููุฏุงุฑุฉ ุงููุนููุฉ ูููุธุงู ุฃู ุงููุณุชุฎุฏู:  
   [Managed Identities Overview on Microsoft Learn](https://learn.microsoft.com/en-us/entra/identity/managed-identities-azure-resources/)

4. **Azure API Management: ุจูุงุจุฉ ุงููุตุงุฏูุฉ ุงูุฎุงุตุฉ ุจู ูุฎูุงุฏู MCP**  
   ูุธุฑุฉ ูุนููุฉ ุนูู ุงุณุชุฎุฏุงู APIM ูุจูุงุจุฉ OAuth2 ุขููุฉ ูุฎูุงุฏู MCP:  
   [Azure API Management Your Auth Gateway For MCP Servers](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690)

5. **ูุฑุฌุน ุฃุฐููุงุช Microsoft Graph**  
   ูุงุฆูุฉ ุดุงููุฉ ุจุงูุฃุฐููุงุช ุงููููุถุฉ ูุชูู ุงูุฎุงุตุฉ ุจุงูุชุทุจูู ูู Microsoft Graph:  
   [Microsoft Graph Permissions Reference](https://learn.microsoft.com/zh-tw/graph/permissions-reference)

## ูุชุงุฆุฌ ุงูุชุนูู  
ุจุนุฏ ุฅููุงู ูุฐุง ุงููุณูุ ุณุชููู ูุงุฏุฑูุง ุนูู:

- ุดุฑุญ ุฃูููุฉ ุงููุตุงุฏูุฉ ูุฎูุงุฏู MCP ูุณูุฑ ุนูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู.  
- ุฅุนุฏุงุฏ ูุชูููู ูุตุงุฏูุฉ Entra ID ููู ูู ุณููุงุฑูููุงุช ุฎูุงุฏู MCP ุงููุญููุฉ ูุงูุจุนูุฏุฉ.  
- ุงุฎุชูุงุฑ ููุน ุงูุนููู ุงูููุงุณุจ (ุนุงู ุฃู ุณุฑู) ุจูุงุกู ุนูู ูุดุฑ ุงูุฎุงุฏู ุงูุฎุงุต ุจู.  
- ุชูููุฐ ููุงุฑุณุงุช ุงูุชุฑููุฒ ุงูุขููุ ุจูุง ูู ุฐูู ุชุฎุฒูู ุงูุฑููุฒ ูุงูุชูููุถ ุจูุงุกู ุนูู ุงูุฏูุฑ.  
- ุญูุงูุฉ ุฎุงุฏู MCP ูุฃุฏูุงุชู ุจุซูุฉ ูู ุงููุตูู ุบูุฑ ุงููุตุฑุญ ุจู.

## ูุง ุงูุชุงูู

- [5.13 ุชูุงูู ุจุฑูุชูููู ุณูุงู ุงููููุฐุฌ (MCP) ูุน Azure AI Foundry](../mcp-foundry-agent-integration/README.md)

**ุฅุฎูุงุก ุงููุณุคูููุฉ**:  
ุชูุช ุชุฑุฌูุฉ ูุฐุง ุงููุณุชูุฏ ุจุงุณุชุฎุฏุงู ุฎุฏูุฉ ุงูุชุฑุฌูุฉ ุงูุขููุฉ [Co-op Translator](https://github.com/Azure/co-op-translator). ุจูููุง ูุณุนู ูุชุญููู ุงูุฏูุฉุ ูุฑุฌู ุงูุนูู ุฃู ุงูุชุฑุฌูุงุช ุงูุขููุฉ ูุฏ ุชุญุชูู ุนูู ุฃุฎุทุงุก ุฃู ุนุฏู ุฏูุฉ. ูุฌุจ ุงุนุชุจุงุฑ ุงููุณุชูุฏ ุงูุฃุตูู ุจูุบุชู ุงูุฃุตููุฉ ุงููุตุฏุฑ ุงูููุซูู ุจู. ูููุนูููุงุช ุงููุงูุฉุ ูููุตุญ ุจุงูุงุนุชูุงุฏ ุนูู ุงูุชุฑุฌูุฉ ุงูุจุดุฑูุฉ ุงูููููุฉ. ูุญู ุบูุฑ ูุณุคูููู ุนู ุฃู ุณูุก ููู ุฃู ุชูุณูุฑ ูุงุชุฌ ุนู ุงุณุชุฎุฏุงู ูุฐู ุงูุชุฑุฌูุฉ.