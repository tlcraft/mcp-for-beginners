<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "1d375ae049e52c89287d533daa4ba348",
  "translation_date": "2025-09-30T18:20:23+00:00",
  "source_file": "11-MCPServerHandsOnLabs/00-Introduction/README.md",
  "language_code": "el"
}
-->
# Εισαγωγή στην Ενσωμάτωση Βάσης Δεδομένων MCP

## 🎯 Τι Καλύπτει Αυτό το Εργαστήριο

Αυτό το εισαγωγικό εργαστήριο παρέχει μια ολοκληρωμένη επισκόπηση της δημιουργίας διακομιστών Model Context Protocol (MCP) με ενσωμάτωση βάσης δεδομένων. Θα κατανοήσετε την επιχειρηματική περίπτωση, την τεχνική αρχιτεκτονική και τις εφαρμογές στον πραγματικό κόσμο μέσω της χρήσης της ανάλυσης λιανικής Zava στο https://github.com/microsoft/MCP-Server-and-PostgreSQL-Sample-Retail.

## Επισκόπηση

Το **Model Context Protocol (MCP)** επιτρέπει στους βοηθούς AI να έχουν ασφαλή πρόσβαση και να αλληλεπιδρούν με εξωτερικές πηγές δεδομένων σε πραγματικό χρόνο. Όταν συνδυάζεται με την ενσωμάτωση βάσης δεδομένων, το MCP ξεκλειδώνει ισχυρές δυνατότητες για εφαρμογές AI που βασίζονται σε δεδομένα.

Αυτό το μονοπάτι μάθησης σας διδάσκει πώς να δημιουργείτε διακομιστές MCP έτοιμους για παραγωγή που συνδέουν βοηθούς AI με δεδομένα πωλήσεων λιανικής μέσω PostgreSQL, εφαρμόζοντας επιχειρηματικά πρότυπα όπως Ασφάλεια σε Επίπεδο Γραμμής (Row Level Security), σημασιολογική αναζήτηση και πρόσβαση σε δεδομένα πολλαπλών ενοικιαστών.

## Στόχοι Μάθησης

Μέχρι το τέλος αυτού του εργαστηρίου, θα μπορείτε να:

- **Ορίσετε** το Model Context Protocol και τα βασικά του οφέλη για την ενσωμάτωση βάσης δεδομένων
- **Εντοπίσετε** βασικά στοιχεία της αρχιτεκτονικής ενός διακομιστή MCP με βάσεις δεδομένων
- **Κατανοήσετε** τη χρήση της Zava Retail και τις επιχειρηματικές της απαιτήσεις
- **Αναγνωρίσετε** επιχειρηματικά πρότυπα για ασφαλή και κλιμακούμενη πρόσβαση σε βάσεις δεδομένων
- **Καταγράψετε** τα εργαλεία και τις τεχνολογίες που χρησιμοποιούνται σε όλο το μονοπάτι μάθησης

## 🧭 Η Πρόκληση: AI και Δεδομένα του Πραγματικού Κόσμου

### Περιορισμοί Παραδοσιακής AI

Οι σύγχρονοι βοηθοί AI είναι εξαιρετικά ισχυροί αλλά αντιμετωπίζουν σημαντικούς περιορισμούς όταν εργάζονται με δεδομένα επιχειρήσεων του πραγματικού κόσμου:

| **Πρόκληση** | **Περιγραφή** | **Επιχειρηματική Επίπτωση** |
|---------------|-----------------|-------------------|
| **Στατική Γνώση** | Τα μοντέλα AI εκπαιδευμένα σε σταθερά σύνολα δεδομένων δεν μπορούν να έχουν πρόσβαση σε τρέχοντα επιχειρηματικά δεδομένα | Ξεπερασμένες πληροφορίες, χαμένες ευκαιρίες |
| **Απομονωμένα Δεδομένα** | Πληροφορίες κλειδωμένες σε βάσεις δεδομένων, APIs και συστήματα που δεν μπορεί να φτάσει η AI | Ατελής ανάλυση, κατακερματισμένες ροές εργασίας |
| **Περιορισμοί Ασφαλείας** | Η άμεση πρόσβαση σε βάσεις δεδομένων εγείρει ανησυχίες για την ασφάλεια και τη συμμόρφωση | Περιορισμένη ανάπτυξη, χειροκίνητη προετοιμασία δεδομένων |
| **Πολύπλοκα Ερωτήματα** | Οι επιχειρηματικοί χρήστες χρειάζονται τεχνικές γνώσεις για να εξάγουν πληροφορίες από δεδομένα | Μειωμένη υιοθέτηση, αναποτελεσματικές διαδικασίες |

### Η Λύση MCP

Το Model Context Protocol αντιμετωπίζει αυτές τις προκλήσεις παρέχοντας:

- **Πρόσβαση σε Δεδομένα σε Πραγματικό Χρόνο**: Οι βοηθοί AI κάνουν ερωτήματα σε ζωντανές βάσεις δεδομένων και APIs
- **Ασφαλή Ενσωμάτωση**: Ελεγχόμενη πρόσβαση με αυθεντικοποίηση και δικαιώματα
- **Διεπαφή Φυσικής Γλώσσας**: Οι επιχειρηματικοί χρήστες κάνουν ερωτήσεις σε απλά Αγγλικά
- **Τυποποιημένο Πρωτόκολλο**: Λειτουργεί σε διαφορετικές πλατφόρμες και εργαλεία AI

## 🏪 Γνωρίστε τη Zava Retail: Η Μελέτη Περίπτωσης Μάθησης μας https://github.com/microsoft/MCP-Server-and-PostgreSQL-Sample-Retail

Σε όλο αυτό το μονοπάτι μάθησης, θα δημιουργήσουμε έναν διακομιστή MCP για τη **Zava Retail**, μια φανταστική αλυσίδα λιανικής DIY με πολλαπλές τοποθεσίες καταστημάτων. Αυτό το ρεαλιστικό σενάριο δείχνει την υλοποίηση MCP σε επίπεδο επιχείρησης.

### Επιχειρηματικό Πλαίσιο

Η **Zava Retail** λειτουργεί:
- **8 φυσικά καταστήματα** στην πολιτεία της Ουάσινγκτον (Seattle, Bellevue, Tacoma, Spokane, Everett, Redmond, Kirkland)
- **1 ηλεκτρονικό κατάστημα** για πωλήσεις μέσω e-commerce
- **Ποικίλο κατάλογο προϊόντων** που περιλαμβάνει εργαλεία, υλικά, είδη κήπου και οικοδομικά υλικά
- **Διαχείριση πολλαπλών επιπέδων** με διευθυντές καταστημάτων, περιφερειακούς διευθυντές και στελέχη

### Επιχειρηματικές Απαιτήσεις

Οι διευθυντές καταστημάτων και τα στελέχη χρειάζονται αναλύσεις με AI για:

1. **Ανάλυση απόδοσης πωλήσεων** σε καταστήματα και χρονικές περιόδους
2. **Παρακολούθηση επιπέδων αποθεμάτων** και εντοπισμό αναγκών αναπλήρωσης
3. **Κατανόηση συμπεριφοράς πελατών** και μοτίβων αγορών
4. **Ανακάλυψη πληροφοριών προϊόντων** μέσω σημασιολογικής αναζήτησης
5. **Δημιουργία αναφορών** με ερωτήματα φυσικής γλώσσας
6. **Διατήρηση ασφάλειας δεδομένων** με έλεγχο πρόσβασης βάσει ρόλων

### Τεχνικές Απαιτήσεις

Ο διακομιστής MCP πρέπει να παρέχει:

- **Πρόσβαση σε δεδομένα πολλαπλών ενοικιαστών**, όπου οι διευθυντές καταστημάτων βλέπουν μόνο τα δεδομένα του καταστήματός τους
- **Ευέλικτα ερωτήματα** που υποστηρίζουν πολύπλοκες λειτουργίες SQL
- **Σημασιολογική αναζήτηση** για ανακάλυψη προϊόντων και προτάσεις
- **Δεδομένα σε πραγματικό χρόνο** που αντικατοπτρίζουν την τρέχουσα κατάσταση της επιχείρησης
- **Ασφαλή αυθεντικοποίηση** με ασφάλεια σε επίπεδο γραμμής
- **Κλιμακούμενη αρχιτεκτονική** που υποστηρίζει πολλούς ταυτόχρονους χρήστες

## 🏗️ Επισκόπηση Αρχιτεκτονικής Διακομιστή MCP

Ο διακομιστής MCP μας υλοποιεί μια πολυεπίπεδη αρχιτεκτονική βελτιστοποιημένη για ενσωμάτωση βάσης δεδομένων:

```
┌─────────────────────────────────────────────────────────────┐
│                    VS Code AI Client                       │
│                  (Natural Language Queries)                │
└─────────────────────┬───────────────────────────────────────┘
                      │ HTTP/SSE
                      ▼
┌─────────────────────────────────────────────────────────────┐
│                     MCP Server                             │
│  ┌─────────────────┐ ┌─────────────────┐ ┌───────────────┐ │
│  │   Tool Layer    │ │  Security Layer │ │  Config Layer │ │
│  │                 │ │                 │ │               │ │
│  │ • Query Tools   │ │ • RLS Context   │ │ • Environment │ │
│  │ • Schema Tools  │ │ • User Identity │ │ • Connections │ │
│  │ • Search Tools  │ │ • Access Control│ │ • Validation  │ │
│  └─────────────────┘ └─────────────────┘ └───────────────┘ │
└─────────────────────┬───────────────────────────────────────┘
                      │ asyncpg
                      ▼
┌─────────────────────────────────────────────────────────────┐
│                PostgreSQL Database                         │
│  ┌─────────────────┐ ┌─────────────────┐ ┌───────────────┐ │
│  │  Retail Schema  │ │   RLS Policies  │ │   pgvector    │ │
│  │                 │ │                 │ │               │ │
│  │ • Stores        │ │ • Store-based   │ │ • Embeddings  │ │
│  │ • Customers     │ │   Isolation     │ │ • Similarity  │ │
│  │ • Products      │ │ • Role Control  │ │   Search      │ │
│  │ • Orders        │ │ • Audit Logs    │ │               │ │
│  └─────────────────┘ └─────────────────┘ └───────────────┘ │
└─────────────────────┬───────────────────────────────────────┘
                      │ REST API
                      ▼
┌─────────────────────────────────────────────────────────────┐
│                  Azure OpenAI                              │
│               (Text Embeddings)                            │
└─────────────────────────────────────────────────────────────┘
```

### Βασικά Στοιχεία

#### **1. Επίπεδο Διακομιστή MCP**
- **FastMCP Framework**: Σύγχρονη υλοποίηση διακομιστή MCP με Python
- **Εγγραφή Εργαλείων**: Δηλωτικός ορισμός εργαλείων με ασφάλεια τύπου
- **Πλαίσιο Αιτήματος**: Διαχείριση ταυτότητας χρήστη και συνεδρίας
- **Διαχείριση Σφαλμάτων**: Ισχυρή διαχείριση σφαλμάτων και καταγραφή

#### **2. Επίπεδο Ενσωμάτωσης Βάσης Δεδομένων**
- **Διαχείριση Συνδέσεων**: Αποτελεσματική διαχείριση συνδέσεων asyncpg
- **Πάροχος Σχήματος**: Δυναμική ανακάλυψη σχήματος πίνακα
- **Εκτελεστής Ερωτημάτων**: Ασφαλής εκτέλεση SQL με πλαίσιο RLS
- **Διαχείριση Συναλλαγών**: Συμμόρφωση ACID και χειρισμός ανακλήσεων

#### **3. Επίπεδο Ασφαλείας**
- **Ασφάλεια σε Επίπεδο Γραμμής**: PostgreSQL RLS για απομόνωση δεδομένων πολλαπλών ενοικιαστών
- **Ταυτότητα Χρήστη**: Αυθεντικοποίηση και εξουσιοδότηση διευθυντών καταστημάτων
- **Έλεγχος Πρόσβασης**: Λεπτομερή δικαιώματα και ίχνη ελέγχου
- **Επικύρωση Εισόδου**: Πρόληψη SQL injection και επικύρωση ερωτημάτων

#### **4. Επίπεδο Ενίσχυσης AI**
- **Σημασιολογική Αναζήτηση**: Ενσωματώσεις διανυσμάτων για ανακάλυψη προϊόντων
- **Ενσωμάτωση Azure OpenAI**: Δημιουργία ενσωματώσεων κειμένου
- **Αλγόριθμοι Ομοιότητας**: Αναζήτηση ομοιότητας pgvector με συσχέτιση συνημιτόνου
- **Βελτιστοποίηση Αναζήτησης**: Δείκτες και βελτιώσεις απόδοσης

## 🔧 Τεχνολογικό Στοίβαγμα

### Βασικές Τεχνολογίες

| **Στοιχείο** | **Τεχνολογία** | **Σκοπός** |
|---------------|----------------|-------------|
| **Πλαίσιο MCP** | FastMCP (Python) | Σύγχρονη υλοποίηση διακομιστή MCP |
| **Βάση Δεδομένων** | PostgreSQL 17 + pgvector | Σχεσιακά δεδομένα με αναζήτηση διανυσμάτων |
| **Υπηρεσίες AI** | Azure OpenAI | Ενσωματώσεις κειμένου και μοντέλα γλώσσας |
| **Κοντεϊνεροποίηση** | Docker + Docker Compose | Περιβάλλον ανάπτυξης |
| **Πλατφόρμα Cloud** | Microsoft Azure | Ανάπτυξη παραγωγής |
| **Ενσωμάτωση IDE** | VS Code | AI Chat και ροή εργασίας ανάπτυξης |

### Εργαλεία Ανάπτυξης

| **Εργαλείο** | **Σκοπός** |
|----------|-------------|
| **asyncpg** | Υψηλής απόδοσης οδηγός PostgreSQL |
| **Pydantic** | Επικύρωση και σειριοποίηση δεδομένων |
| **Azure SDK** | Ενσωμάτωση υπηρεσιών cloud |
| **pytest** | Πλαίσιο δοκιμών |
| **Docker** | Κοντεϊνεροποίηση και ανάπτυξη |

### Στοίβα Παραγωγής

| **Υπηρεσία** | **Πόρος Azure** | **Σκοπός** |
|-------------|-------------------|-------------|
| **Βάση Δεδομένων** | Azure Database for PostgreSQL | Διαχειριζόμενη υπηρεσία βάσης δεδομένων |
| **Κοντέινερ** | Azure Container Apps | Φιλοξενία κοντέινερ χωρίς διακομιστή |
| **Υπηρεσίες AI** | Azure AI Foundry | Μοντέλα OpenAI και τελικά σημεία |
| **Παρακολούθηση** | Application Insights | Παρατηρησιμότητα και διαγνωστικά |
| **Ασφάλεια** | Azure Key Vault | Διαχείριση μυστικών και ρυθμίσεων |

## 🎬 Σενάρια Χρήσης στον Πραγματικό Κόσμο

Ας εξερευνήσουμε πώς διαφορετικοί χρήστες αλληλεπιδρούν με τον διακομιστή MCP μας:

### Σενάριο 1: Ανασκόπηση Απόδοσης Διευθυντή Καταστήματος

**Χρήστης**: Η Σάρα, Διευθύντρια Καταστήματος στο Seattle  
**Στόχος**: Ανάλυση της απόδοσης πωλήσεων του τελευταίου τριμήνου

**Ερώτημα Φυσικής Γλώσσας**:
> "Δείξε μου τα 10 κορυφαία προϊόντα ανά έσοδα για το κατάστημά μου στο Q4 2024"

**Τι Συμβαίνει**:
1. Το AI Chat του VS Code στέλνει το ερώτημα στον διακομιστή MCP
2. Ο διακομιστής MCP εντοπίζει το πλαίσιο του καταστήματος της Σάρας (Seattle)
3. Οι πολιτικές RLS φιλτράρουν τα δεδομένα μόνο για το κατάστημα του Seattle
4. Δημιουργείται και εκτελείται ερώτημα SQL
5. Τα αποτελέσματα μορφοποιούνται και επιστρέφονται στο AI Chat
6. Το AI παρέχει ανάλυση και πληροφορίες

### Σενάριο 2: Ανακάλυψη Προϊόντων με Σημασιολογική Αναζήτηση

**Χρήστης**: Ο Μάικ, Υπεύθυνος Αποθεμάτων  
**Στόχος**: Εύρεση προϊόντων παρόμοιων με αίτημα πελάτη

**Ερώτημα Φυσικής Γλώσσας**:
> "Ποια προϊόντα πουλάμε που είναι παρόμοια με 'αδιάβροχους ηλεκτρικούς συνδέσμους για εξωτερική χρήση';"

**Τι Συμβαίνει**:
1. Το ερώτημα επεξεργάζεται από το εργαλείο σημασιολογικής αναζήτησης
2. Το Azure OpenAI δημιουργεί διανυσματική ενσωμάτωση
3. Το pgvector εκτελεί αναζήτηση ομοιότητας
4. Σχετικά προϊόντα κατατάσσονται κατά συνάφεια
5. Τα αποτελέσματα περιλαμβάνουν λεπτομέρειες προϊόντων και διαθεσιμότητα
6. Το AI προτείνει εναλλακτικές και ευκαιρίες συνδυασμού

### Σενάριο 3: Ανάλυση Διασταυρούμενων Καταστημάτων

**Χρήστης**: Η Τζένιφερ, Περιφερειακή Διευθύντρια  
**Στόχος**: Σύγκριση απόδοσης σε όλα τα καταστήματα

**Ερώτημα Φυσικής Γλώσσας**:
> "Σύγκρινε πωλήσεις ανά κατηγορία για όλα τα καταστήματα τους τελευταίους 6 μήνες"

**Τι Συμβαίνει**:
1. Το πλαίσιο RLS ορίζεται για πρόσβαση περιφερειακού διευθυντή
2. Δημιουργείται πολύπλοκο ερώτημα πολλαπλών καταστημάτων
3. Τα δεδομένα συγκεντρώνονται σε τοποθεσίες καταστημάτων
4. Τα αποτελέσματα περιλαμβάνουν τάσεις και συγκρίσεις
5. Το AI εντοπίζει πληροφορίες και προτάσεις

## 🔒 Εμβάθυνση στην Ασφάλεια και την Πολυενοικίαση

Η υλοποίησή μας δίνει προτεραιότητα στην ασφάλεια επιπέδου επιχείρησης:

### Ασφάλεια σε Επίπεδο Γραμμής (RLS)

Το PostgreSQL RLS εξασφαλίζει απομόνωση δεδομένων:

```sql
-- Store managers see only their store's data
CREATE POLICY store_manager_policy ON retail.orders
  FOR ALL TO store_managers
  USING (store_id = get_current_user_store());

-- Regional managers see multiple stores
CREATE POLICY regional_manager_policy ON retail.orders
  FOR ALL TO regional_managers
  USING (store_id = ANY(get_user_store_list()));
```

### Διαχείριση Ταυτότητας Χρήστη

Κάθε σύνδεση MCP περιλαμβάνει:
- **ID Διευθυντή Καταστήματος**: Μοναδικό αναγνωριστικό για το πλαίσιο RLS
- **Ανάθεση Ρόλου**: Δικαιώματα και επίπεδα πρόσβασης
- **Διαχείριση Συνεδρίας**: Ασφαλή διακριτικά αυθεντικοποίησης
- **Καταγραφή Ελέγχου**: Πλήρες ιστορικό πρόσβασης

### Προστασία Δεδομένων

Πολλαπλά επίπεδα ασφάλειας:
- **Κρυπτογράφηση Συνδέσεων**: TLS για όλες τις συνδέσεις βάσης δεδομένων
- **Πρόληψη SQL Injection**: Μόνο παραμετροποιημένα ερωτήματα
- **Επικύρωση Εισόδου**: Ολοκληρωμένη επικύρωση αιτημάτων
- **Διαχείριση Σφαλμάτων**: Χωρίς ευαίσθητα δεδομένα στα μηνύματα σφαλμάτων

## 🎯 Βασικά Συμπεράσματα

Μετά την ολοκλήρωση αυτής της εισαγωγής, θα πρέπει να κατανοείτε:

✅ **Πρόταση Αξίας MCP**: Πώς το MCP γεφυρώνει τους βοηθούς AI και τα δεδομένα του πραγματικού κόσμου  
✅ **Επιχειρηματικό Πλαίσιο**: Τ

---

**Αποποίηση ευθύνης**:  
Αυτό το έγγραφο έχει μεταφραστεί χρησιμοποιώντας την υπηρεσία αυτόματης μετάφρασης [Co-op Translator](https://github.com/Azure/co-op-translator). Παρόλο που καταβάλλουμε προσπάθειες για ακρίβεια, παρακαλούμε να έχετε υπόψη ότι οι αυτόματες μεταφράσεις ενδέχεται να περιέχουν λάθη ή ανακρίβειες. Το πρωτότυπο έγγραφο στη μητρική του γλώσσα θα πρέπει να θεωρείται η αυθεντική πηγή. Για κρίσιμες πληροφορίες, συνιστάται επαγγελματική ανθρώπινη μετάφραση. Δεν φέρουμε ευθύνη για τυχόν παρεξηγήσεις ή εσφαλμένες ερμηνείες που προκύπτουν από τη χρήση αυτής της μετάφρασης.